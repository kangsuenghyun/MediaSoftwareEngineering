    <script>
//splice랑 coffeeEffect = data.coffee; 의미 궁금
//coffeEffect = data.coffee -> emit해준 값을 받아오는거네 server js에서 coffee를 true로 처리해줬으니깐 ㅇㅇ
// 적들의 속도를 어떻게 접근해서 줄일것인지
//
    

       
       
        
        function acquireDetection(){
            let ball = ballMap[myId]
            for(var i = 0; i < items.length ; i++){
                if (items[i]===item){
                    if(  Math.sqrt((ball.getX() - items[i].getX())**2 + (ball.getY() - items[i].getY())**2) <= ball.getRadius() + items[i].getRadius()){
                    socket.emit('item_detect');
                    items.splice(i,1);
                    
                }
                }
                else{
                    if(  Math.sqrt((ball.getX() - items[i].getX())**2 + (ball.getY() - items[i].getY())**2) <= ball.getRadius() + items[i].getRadius()){
                    socket.emit('hotsix_detect');
                    items.splice(i,1);
                    break;
                }
                
            }
            
        }
        
        var socket = io();

     
     

    
        var items = [];



        socket.on('item_generator', function(data){
            let item = new itemBall(data.startingX, data.startingY, data.destinationX, data.destinationY, data.wall)
            items.push(item);
            console.log(items);
        })

        //어차피 이름과 효과만 다른거니깐 같은 genrator event로 받아와서 hotsix라는 이름으로 넣어주자고
        socket.on('item_generator', function(data){
            let hotsix = new itemBall(data.startingX, data.startingY, data.destinationX, data.destinationY, data.wall)
            items.push(hotsix);
            console.log(hotsix);
        })
        
        let coffeeEffect = false;
        socket.on('coffee_effect', function(data){
            coffeeEffect = data.coffee;
        })       

        let hotsixEffect = false;
        socket.on('hotsix_effect', function(data){
            hotsixEffect = data.hotsix;
        })

        
        function renderItems(){
            for (let j = 0; j < items.length; j++){
                    
                    //let item = items[j];   //이게 왜 있는거임? 위에서 item이미 선언 했는데?
                   // ->그냥 뒤에 코드 편하게 쓰려고 저장 해놓은거 같은데 계속 items[j]로 하기 귀찮으니깐
                    //if items[j]== item: -> coffec로 처리하고
                    //if itmes[j]== hotsix -> hotsiz로 처리하고

                    ctx.beginPath();
                    ctx.fillStyle = items[j].getColor();
                    ctx.arc(items[j].getX(), items[j].getY(), items[j].getRadius(), 0, Math.PI *2, false);
                    ctx.closePath();
                    ctx.fill();

                    ctx.beginPath();
                    ctx.font = '15px Arial';
                    ctx.fillStyle = '#6f4e37';
                    if (items[j]==item){
                        ctx.fillText(`ITEM_COFFEE`, items[j].getX()-items[j].getRadius()-20,items[j].getY()-items[j].getRadius());}
                    else{
                        ctx.fillText(`ITEM_Hotsix`, items[j].getX()-items[j].getRadius()-20,items[j].getY()-items[j].getRadius());}
                    }
                    ctx.closePath();
                }
                for ( let k = 0 ; k < items.length; k++){
                
                    var distanceX = Math.abs(items[j].getDestinationX() - items[j].getInitialX());
                    var distanceY = Math.abs(items[j].getDestinationY() - items[j].getInitialY());
                    var speedY = distanceY/items[j].getAliveTime();
                    var speedX = distanceX/items[j].getAliveTime();
                    if(item.getWall() == 0){//leftSide
                        if (items[j].getDestinationY() >= items[j].getY()){
                            items[j].setX(items[j].getX() + speedX);
                            items[j].setY(items[j].getY() + speedY);
                        }
                        else{
                            items[j].setX(items[j].getX() + speedX);
                            items[j].setY(items[j].getY() - speedY);
                        }
                    }
                    else if (items[j].getWall() == 1){
                        if (items[j].getDestinationY() >= items[j].getY()){
                            items[j].setX(items[j].getX() - speedX);
                            items[j].setY(items[j].getY() + speedY);
                     }
                        else{
                            items[j].setX(items[j].getX() - speedX);
                            items[j].setY(items[j].getY() - speedY);
                        }
                    }
                    else if (items[j].getWall() == 2){
                        if (items[j].getDestinationX() >= items[j].getX()){
                            items[j].setX(items[j].getX() + speedX);
                            items[j].setY(items[j].getY() + speedY);
                        }
                        else{
                            items[j].setX(items[j].getX() - speedX);
                            items[j].setY(items[j].getY() + speedY);
                        }
                    }
                    else if (items[j].getWall() == 3){
                        if (items[j].getDestinationX() >= items[j].getX()){
                            items[j].setX(items[j].getX() + speedX);
                            items[j].setY(items[j].getY() - speedY);

                        }
                        else{
                            items[j].setX(items[j].getX() - speedX);
                            items[j].setY(items[j].getY() - speedY);
                        }
                    }
                    
                    if (items[j].getX() < -100 || items[j].getX() > 1400 || items[j].getY() < -100 || items[j].getY() > 1400){
                        items.splice(k,1);
                    }
                }
        }

      
        

     



        function renderGame() {            
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                collisionDetection();
                renderStage();
                renderPlayers();
                renderEnemys();
                renderItems();
                renderTimer();
                if(stageClear){
                    renderClearMessage();
                }
                acquireDetection();
                if(coffeeEffect){
                    enemys.length = 0;
                    items.length = 0;
                    coffeeEffect = false;
                }

                if(hotsixEffect){
                    //item의 이동속도 감소;
                    hotsixEffect = false;
                }

                if(balls.length){
                    sendData();
                }
                if(isStart){
                    timer -= 0.010;
                    if(parseInt(timer) <= 0){
                        timer = 0;
                    }
                }
                renderTimer();
            }
        
        var isStart = false;
      
        function update() {
            renderGame();
        }

        setInterval(update, 10);

       
       


    </script>
    <script>

    </script>
    <div style="text-align: center;">
        <button style= "width: 150px; height: 50px;" id="my_btn" onclick="start()";><font size ="5em">Game Start</font></button>
    </div>
    <div style="text-align: center;">
        <font size="5em" color="green">
            <p>Move through the Arrow key on the keyboard.</p> 
            <p>Player0 is Host. The game starts only when the Host presses the Start button. </p> 
            <p>Player0가 Host입니다. Host가 시작버튼을 눌러야 게임이 시작됩니다.</p> 
            <span>키보드 방향키를 통해 움직이세요. </span>
        </font>
         
    </div>
</body>
</html>